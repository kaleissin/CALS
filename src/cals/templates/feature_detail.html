{% extends "base.html" %}
{% load cals_tags %}
{% block title %} Feature: {{ object.name }}{% endblock title %}
{% block submenu %}
<ul>
    <li><a href="../">All features</a></li>
    {% if user.is_authenticated and user.is_staff %}
    <li><a href="./change">Change</a></li>
    {% endif %}
    <li><a href="./history/">History</a></li>
</ul>
    <hr />
    <form action="" method="post">
        {% csrf_token %}
        <div>{{ cform.feature2 }}</div>
        <div><button type="submit">Compare</button></div>
    </form>
{% endblock submenu %}
{% block content %}
    <h1>{{ object.name }} {% walsfeature object.id %}</h1>
    {{ object.description.freetext_xhtml|safe }}
    <table>
        <tr>
            <th>In-depth description:</th>
        {% if object.wals %}
            {% if not object.description.freetext %}<td>Only at {% wals object.id %}</td>{% else %}<td>At {% wals object.id %}</td>{% endif %}
            {% else %}{% if object.description.freetext_link %}<td><a href="{{ object.description.freetext_link }}">{{ object.description.freetext_link }}</a></td>{% endif %}
        {% endif %}
        </tr>
        <tr>
            <th>Values:</th>
            <td></td>
            <td rowspan="{{ object.values.count|add:1 }}" class="graph">{% feature_graph object %}</td>
        </tr>
        {% for value in object.values.all %}
        <tr class="{% cycle odd,even %}">
            <td></td>
            <td><a href="/value/{{ value.id }}">{{ value.name }}</a> 
                ({{ value.languagefeature_set.count }} language{{ value.languagefeature_set.count|pluralize }})</td>
        </tr>
        {% endfor %}
    </table>
{% endblock content %}
